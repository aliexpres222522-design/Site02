<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–î–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è - –£–Ω—ñ–≤–µ—Ä—Å–∏—Ç–µ—Ç—Å—å–∫—ñ —Å—Ç—É–¥—ñ—ó</title>
<style>
:root {--bg:#0f1222;--card:#161a2f;--text:#e8eaf6;--muted:#b6b9d6;--accent:#6c5ce7;--accent-2:#00d4ff;--radius:18px;--shadow:0 10px 30px rgba(0,0,0,.35);}
body {margin:0;font-family:Segoe UI, sans-serif;background:var(--bg);color:var(--text);}
.container{max-width:800px;margin:0 auto;padding:30px;}
h1{text-align:center;margin-bottom:20px;}
.card{background:var(--card);padding:20px;border-radius:var(--radius);box-shadow:var(--shadow);margin-bottom:20px;}
.btn{background:linear-gradient(135deg,var(--accent),var(--accent-2));color:#fff;padding:10px 14px;border:none;border-radius:12px;cursor:pointer;font-weight:600;text-decoration:none;display:inline-block;}
.task-list{margin-top:20px;}
.task{padding:12px;background:#1f243d;border-radius:12px;margin-bottom:10px;}
.task a{color:var(--accent-2);text-decoration:none;}
textarea,input[type=text]{width:100%;border-radius:12px;padding:10px;margin-bottom:10px;border:none;}
textarea{min-height:60px;resize:vertical;}
.author{font-size:13px;color:var(--muted);margin-top:4px;}
header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;}
</style>
</head>
<body>
<div class="container">
<header>
<h1>–î–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è ‚Äì –£–Ω—ñ–≤–µ—Ä—Å–∏—Ç–µ—Ç—Å—å–∫—ñ —Å—Ç—É–¥—ñ—ó</h1>
<a href="index.html" class="btn">‚¨Ö –ù–∞–∑–∞–¥ –Ω–∞ –≥–æ–ª–æ–≤–Ω—É</a>
</header>
<div class="card">
<h3>–î–æ–¥–∞—Ç–∏ –Ω–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è</h3>
<input type="text" id="authorInput" placeholder="–í–∞—à–µ —ñ–º‚Äô—è –∞–±–æ –Ω—ñ–∫–Ω–µ–π–º">
<textarea id="textInput" placeholder="–í–≤–µ–¥—ñ—Ç—å —Ç–µ–∫—Å—Ç –∑–∞–≤–¥–∞–Ω–Ω—è..."></textarea>
<input type="file" id="fileInput"><br><br>
<button class="btn" onclick="addTask()">–î–æ–¥–∞—Ç–∏</button>
</div>
<div class="card">
<h3>–°–ø–∏—Å–æ–∫ –∑–∞–≤–¥–∞–Ω—å</h3>
<div class="task-list" id="taskList"></div>
</div>
</div>
<script>
// üîπ –ú–æ–∂–µ—à –∑–∞–ª–∏—à–∏—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ, —Ç–æ–¥—ñ –±—É–¥–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ localStorage
const API_URL = "https://api.jsonbin.io/v3/b/68c5a56d43b1c97be941ee19";
  const API_KEY = "$2a$10$E6WdYYcQCgXExtvWX7vaNejkvcrHmtuNyczCuj308gXyeGdnElYOC";


let tasks = JSON.parse(localStorage.getItem('tasks_unstudio')) || [];

async function loadTasks(){
  if(API_URL && API_KEY){
    try {
      const res = await fetch(API_URL, { headers: { "X-Master-Key": API_KEY }});
      const data = await res.json();
      if(Array.isArray(data.record)) tasks = data.record;
      else if(data.record && Array.isArray(data.record.tasks)) tasks = data.record.tasks;
      else tasks = [];
      localStorage.setItem('tasks_unstudio', JSON.stringify(tasks));
    } catch(e){ console.error("–ü–æ–º–∏–ª–∫–∞ JSONBin:", e); }
  }
  renderTasks();
}

async function saveTasks(){
  localStorage.setItem('tasks_unstudio', JSON.stringify(tasks));
  if(API_URL && API_KEY){
    const payload = { tasks: tasks };
    try{
      await fetch(API_URL, {
        method: "PUT",
        headers: { "Content-Type": "application/json", "X-Master-Key": API_KEY },
        body: JSON.stringify(payload)
      });
    }catch(e){ console.error("–ü–æ–º–∏–ª–∫–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è:", e); }
  }
}

function renderTasks(){
  const list=document.getElementById('taskList'); list.innerHTML='';
  tasks.forEach((task,i)=>{
    let content='';
    if(task.type==='text') content=`<p>${task.text}</p>`;
    else if(task.type==='file') content=`<a href="${task.url}" download="${task.name}">${task.name}</a>`;
    list.innerHTML+=`<div class="task"><strong>${task.author||"–ê–Ω–æ–Ω—ñ–º"}:</strong><br>${content}<div class="author">–î–æ–¥–∞–Ω–æ: ${task.date}</div><button onclick="deleteTask(${i})" style="margin-top:5px;">‚ùå –í–∏–¥–∞–ª–∏—Ç–∏</button></div>`;
  });
}

function addTask(){
  const authorInput=document.getElementById('authorInput');
  const textInput=document.getElementById('textInput');
  const fileInput=document.getElementById('fileInput');
  if(textInput.value.trim()==='' && fileInput.files.length===0){alert("–í–≤–µ–¥—ñ—Ç—å —Ç–µ–∫—Å—Ç –∞–±–æ –ø—Ä–∏–∫—Ä—ñ–ø—ñ—Ç—å —Ñ–∞–π–ª!"); return;}
  const author=authorInput.value.trim()||"–ê–Ω–æ–Ω—ñ–º";
  const date=new Date().toLocaleString();
  if(textInput.value.trim()!==''){
    tasks.push({type:'text',text:textInput.value,author,date});
    textInput.value='';
  }
  else if(fileInput.files.length>0){
    const file=fileInput.files[0];
    const reader=new FileReader();
    reader.onload=function(e){
      tasks.push({type:'file',name:file.name,url:e.target.result,author,date});
      saveTasks();
      renderTasks();
    };
    reader.readAsDataURL(file);
    fileInput.value='';
    return;
  }
  saveTasks();
  renderTasks();
}

function deleteTask(i){
  tasks.splice(i,1);
  saveTasks();
  renderTasks();
}

// üîπ –ó–∞–ø—É—Å–∫
loadTasks();
</script>
</body>
</html>
